<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout.html}">
    <head>
    </head>
    <body>
        <div class="main-wrapper" role="main" layout:fragment="content">
            <form th:action="@{'/rent-films/' + ${film.getId()}}" method="post">
                <table>
                    <thead>
                    <tr>
                        <th>Leih-Woche</th>
                        <th>aktueller Leihstatus</th>
                        <th>neuer Leihstatus</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="week : ${allRangeYearWeeks}">
                        <td th:text="${week.getWeekRangeFormat()}">...</td>

                        <td>
                            <input type="checkbox" name="current-selected-rent-weeks" th:value="${week.getId()}"
                                   th:checked="${reservedWeeks.contains(week)}" disabled>
                        </td>
                        <td>
                            <input type="hidden" name="new-disabled-checked-rent-weeks"
                                   th:if="${nowAndPastWeeks.contains(week) || blockedReservedWeeks.contains(week)}"
                                   th:value="${week.getId()}">
                            <input type="checkbox" name="new-selected-rent-weeks" th:value="${week.getId()}"
                                   th:checked="${reservedWeeks.contains(week)}"
                                   th:disabled="${nowAndPastWeeks.contains(week) || blockedReservedWeeks.contains(week)}">
                            <div class="rent-storno-error" th:if="${nowAndPastWeeks.contains(week)}">
                                Verleih oder Storno des Films nur für kommende Wochen möglich.
                            </div>
                            <div class="rent-storno-error" th:if="${blockedReservedWeeks.contains(week)}">
                                Storno nur möglich, wenn alle Vorführungen in der Woche für den Film umgelegt oder gelöscht werden.
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>Summe:</td>
                        <td>...</td>
                        <td>...</td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td>
                            <button type="submit">Speichern</button>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </form>

            <style>
                table {
                    width: 100%;
                    border-collapse: collapse;
                }
                th, td {
                    border: 1px solid #000;
                    padding: 8px;
                    text-align: left;
                }
                th {
                    background-color: #333333;
                }

                .rent-storno-error {
                    color:red;
                }
            </style>
        </div>
    </body>
</html>
