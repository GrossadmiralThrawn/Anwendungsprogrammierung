<!DOCTYPE html>
<html lang="de" class="client-js"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout.html}">
<head>
    <meta charset="utf-8">
    <title>Saalverwaltung | UFO Kinos</title>
    <meta name="description"
          content="Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut l">
    <meta name="keywords" content="lorem, ipsum">
    <meta name="referrer" content="strict-origin-when-cross-origin">
    <meta name="theme-color" content="#000000">
    <meta name="color-scheme" content="dark">
    <meta name="robots" content="index,follow">
    <!-- <meta name="rating" content="adult"> -->

    <link rel="stylesheet" href="/css/common.css">

    <link rel="icon" href="/assets/branding/icon-48.png">

    <script src="/js/lib/jquery.js?ver=202404"></script>
    <script src="/js/lib/dsgvo-cookie-choises.js?ver=202404"></script>

    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script th:inline="javascript">
        // Daten aus Thymeleaf in JavaScript-Array umwandeln
        var dailyIncomeData = /*[[${dailyIncomeData}]]*/ '[]';
        var revenueData = /*[[${revenueData}]]*/ '[]';
    </script>
    <script type="text/javascript">
        google.charts.load("current", {packages: ['corechart', 'line']});
        google.charts.setOnLoadCallback(drawChart);
        google.charts.setOnLoadCallback(drawBasic);

        function drawChart() {
            //console.log(dailyIncomeData);
            var dataArray = [];
            dataArray.push(['Einnahmequelle', 'Einnahmen']);
            for (var i = 0; i < dailyIncomeData.length; i++) {
                dataArray.push([dailyIncomeData[i].source, dailyIncomeData[i].amount]);
            }

            var data = google.visualization.arrayToDataTable(dataArray);

            var options = {
                title: 'Tageseinnahmen (in €)',
                pieHole: 0.4,
            };

            var chart = new google.visualization.PieChart(document.getElementById('dailyIncome'));
            chart.draw(data, options);
        }


        function drawBasic() {
            //console.log(revenueData);
            var dataArray = [];
            for (var i = 0; i < revenueData.length; i++) {
                dataArray.push([new Date(revenueData[i].date), revenueData[i].revenue]);
            }
            var data = new google.visualization.DataTable();
            data.addColumn('date', 'Day');
            data.addColumn('number', 'Umsatz in €');

            data.addRows(dataArray);

            var options = {
                hAxis: {
                    title: 'Tag',
                    format: 'dd/MM',
                },
                vAxis: {
                    title: 'Umsatz(€)'
                }
            };

            var chart = new google.visualization.LineChart(document.getElementById('revenue'));

            chart.draw(data, options);
        }
    </script>
</head>
<body>
<!-- todo:background asset? -->
<div class="background"></div>
<div class="css-hack">
    <div class="main-outer">
        <div class="head">
            <img class="logo" src="/assets/branding/logo.png" alt="UFO Kinos Logo">
        </div>
        <div class="main-wrapper" role="main" layout:fragment="content">
            <h1>Dashboard</h1>
            <h2>Tageseinnahmen</h2>
            <div id="dailyIncome" style="width: 900px; height: 500px;"></div>
            <br>
            <hr>
            <br>
            <h2>Umsatz</h2>
            <div id="revenue" style="width: 900px; height: 500px;"></div>


        </div>
        <div class="footer">
            <span class="copyright">&copy; UFO-Kinos</span>
            <ul class="links">
                <li><a href="/imprint" title="Impressum | UFO Kinos">Impressum</a></li>
                <li><a href="/privacy" title="Datenschutz | UFO Kinos">Datenschutz</a></li>
                <li><a href="#" title="Cookie-Einstellungen | UFO Kinos" class="nojs-hide">Cookie-Einstellungen</a></li>
            </ul>
        </div>
    </div>
</div>
</body>
</html>